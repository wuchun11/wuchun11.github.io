<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>网关解析</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> -->
  <link rel="stylesheet" href="./layui/layui/css/layui.css" media="all">
</head>
<body>
 

 
<script src="./layui/layui.js"></script>

<table class="layui-hide" id="demo" lay-filter="test"></table>

<!-- <table class="layui-hide" id="demo" lay-filter="useruv"></table> -->
<script type="text/html" id="barDemo">
    <!-- <a class="layui-btn layui-btn-primary layui-btn-mini" lay-event="detail">查看</a> -->
    <a class="layui-btn layui-btn-radius layui-btn-normal" lay-event="detail">解析</a>
</script>


<style type="text/css">
    .layui-table-cell {
     height: auto;
     line-height: 30px;
    }
</style>


<script>
layui.use(function(){
  var table = layui.table;
  
  //第一个实例
  table.render({
    elem: '#demo'
    // ,height: 312
    ,height: 400
    // ,url: './layui/' //数据接口
    ,page: true //开启分页
    ,cellMinWidth: 80
    // ,toolbar: 'default' //开启工具栏，此处显示默认图标，可以自定义模板，详见文档
    ,cols: [[ //表头
        // {type: 'checkbox', fixed: 'left'}
        {field: 'id', title: '序号', width:80, fixex: 'left'}
        ,{field: 'key', title: '标识', align: 'center', width:800}
        // ,{align: 'center', title: '操作', width: 180, toolbar: '#delivery-table-operate'}
        ,{fixed:'right',align: 'center', width:150,toolbar:"#barDemo"}

    ]]

    ,data: [{"id":"1", "key":"21.86103.2/bb9911c92c1410c6fe2906b4aa3729e7a1cf259a88de0f590113e94095a8df8c"}
            ,{"id":"2", "key":"21.86103.2/2bc63241b92a1210e04fbacc3e06f56b59109b8b1df7b7513995b9a2f83d46c7"}
            ,{"id":"3","key":"21.86103.2/1701111fe435cf1f1bdc7052c29a802ffaf3114fb2c570ba29583ba6aa8de8f0"}
            ,{"id":"4","key":"21.86103.2/0f152d85672d6e76c92d9d685f4dabd01de9babe2a495463dd4c7cff4c76193c"}
            ,{"id":"5","key":"21.86103.2/9be42540736b75b28c136169441c6a4bc7ea22b0a7ff8ca8a65b18e62faebcb1"}
            ,{"id":"6","key":"21.86103.2/c82c54c556a80b72f8e93908e985e18976280960af013d73ad056d4bc664211b"}
        ]
    
  });

  table.on('tool(test)', function(obj){
    var data = obj.data;
    if(obj.event === 'detail'){
        switch(data.id) {
            case '1':
                var x = "[{\"handleID\":\"21.86103.2/bb9911c92c1410c6fe2906b4aa3729e7a1cf259a88de0f590113e94095a8df8c\",\"protocol\":\"zigbee\",\"staticID\":\"88:46:04:4e:27:71\"}]";
                break;
            case '2':
                var x = "[{\"handleID\":\"21.86103.2/bb9911c92c1410c6fe2906b4aa3729e7a1cf259a88de0f590113e94095a8df8c\",\"protocol\":\"zigbee\",\"staticID\":\"88:46:04:4e:27:71\"}]";
                break;
            case '3':
                var x = "[{\"handleID\":\"21.86103.2/1701111fe435cf1f1bdc7052c29a802ffaf3114fb2c570ba29583ba6aa8de8f0\",\"protocol\":\"wi-fi\",\"staticID\":\"88:46:04:46:93:f1\"}]";
                break;
            case '4':
                var x = "[{\"handleID\":\"21.86103.2/1701111fe435cf1f1bdc7052c29a802ffaf3114fb2c570ba29583ba6aa8de8f0\",\"protocol\":\"wi-fi\",\"staticID\":\"88:46:04:46:93:f1\"}]";
                break;
            case '5':
                var x = "[{\"handleID\":\"21.86103.2/1701111fe435cf1f1bdc7052c29a802ffaf3114fb2c570ba29583ba6aa8de8f0\",\"protocol\":\"wi-fi\",\"staticID\":\"88:46:04:46:93:f1\"}]";
                break;
            case '6':
                var x = "[{\"handleID\":\"21.86103.2/1701111fe435cf1f1bdc7052c29a802ffaf3114fb2c570ba29583ba6aa8de8f0\",\"protocol\":\"wi-fi\",\"staticID\":\"88:46:04:46:93:f1\"}]";
                break;        
        }
        var sleep = function(time) {
                    var startTime = new Date().getTime() + parseInt(time, 10);
                    while(new Date().getTime() < startTime) {}
                };

                sleep(800); // 延时函数，单位ms
            layer.open({
                    title: '解析结果'
                    ,content: x
                });             
        // layer.msg('mac：'+ data.mac);
//         var xhr = new XMLHttpRequest();
    
//      xhr.open("POST", "http://62.234.44.237:8888/query", true);
//      xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
//      xhr.onreadystatechange = function(){
         
//          var XMLHttpReq = xhr;
//          /**
//              XMLHttpReq.readyState
//           0: 请求未初始化
//           1: 服务器连接已建立
//           2: 请求已接收
//           3: 请求处理中
//           4: 请求已完成，且响应已就绪
//          **/
//          if (XMLHttpReq.readyState == 4) {
//             if (XMLHttpReq.status == 200) {                
//                 var responseData = XMLHttpReq.responseText;
//             //     layer.open({
//             //         type: 1 //此处以iframe举例
//             //         ,title: '基于网关的互联互通'
//             //         ,area: ['450px', '300px']
//             //         ,shade: 0
//             //         ,maxmin: true
//             //         ,time: 1000  //5秒之后自动关闭
//             //         ,content: "正在解析..."
//             //     });
//                 var sleep = function(time) {
//                     var startTime = new Date().getTime() + parseInt(time, 10);
//                     while(new Date().getTime() < startTime) {}
//                 };

//                 sleep(800); // 延时函数，单位ms
//                 layer.open({
//                     title: '解析结果'
//                     ,content: responseData
//                 }); 
// //                 sleep(2).then(() => {
// //                     // 这里写sleep之后需要去做的事情
// //                     layer.open({
// //                     title: '解析结果'
// //                     ,content: responseData
// //                 }); 
// //                 })
//              }else if(XMLHttpReq.status == 100){
//                  var insert = "<p>300";
//                  document.getElementById("response").innerHTML = insert;    
//              }else if(XMLHttpReq.status == 300){
//                  var insert = "<p>300";
//                  document.getElementById("response").innerHTML = insert;    
//              }else if(XMLHttpReq.status == 400){
//                  var insert = "<p>400";
//                  document.getElementById("response").innerHTML = insert;              
//              }else if(XMLHttpReq.status == 500){
//                  var insert = "<p>500";
//                  document.getElementById("response").innerHTML = insert;              
//              }else if(XMLHttpReq.status == 0){
//                  /** 0不是http协议的状态,关于XMLHttpReq.status的说明:
//                  1、If the state is UNSENT or OPENED, return 0.（如果状态是UNSENT或者OPENED，返回0）
//                  2、If the error flag is set, return 0.（如果错误标签被设置，返回0）
//                  3、Return the HTTP status code.（返回HTTP状态码）
//                  第一种情况,例如:url请求的是本地文件,状态会是0
//                  第二种情况经常出现在跨域请求中,比如url不是本身网站IP或域名,例如请求www.baidu.com时
//                  第三种,正常请求本站http协议信息时,正常返回http协议状态值
//                  **/
//                  var insert = "<p>000";
//                  document.getElementById("response").innerHTML = insert;  
//              }
             
//          }
//      };
//     var oInp = "keyword=" + data.key;
//     xhr.send(oInp);
    } 
    });
    
});




</script>

</body>
</html>